.\" Man page generated from reStructuredText.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "CASCADED-CONFIG.TOML" "1" "Oct 05, 2025" "0.1.0-rc1" "Cascade"
.SH NAME
cascaded-config.toml \- Cascade configuration file
.sp
Cascade uses the TOML format for its configuration file. A template can be
generated using \fBcascade template config\fP\&. The provided values to the options
below are the default values and are serving as a hint to the option\(aqs format.
.SH EXAMPLE
.INDENT 0.0
.INDENT 3.5
.sp
.EX
version = \(dqv1\(dq
policy\-dir = \(dq/etc/cascade/policies\(dq
zone\-state\-dir = \(dq/var/lib/cascade/zone\-state\(dq
tsig\-store\-path = \(dq/var/lib/cascade/tsig\-keys.db\(dq
kmip\-credentials\-store\-path = \(dq/var/lib/cascade/kmip/credentials.db\(dq
keys\-dir = \(dq/var/lib/cascade/keys\(dq
kmip\-server\-state\-dir = \(dq/var/lib/cascade/kmip\(dq
dnst\-binary\-path = \(dq/usr/libexec/cascade/cascade\-dnst\(dq

[daemon]
log\-level = \(dqinfo\(dq
log\-target = { type = \(dqfile\(dq, path = \(dq/dev/stdout\(dq }
daemonize = false

[remote\-control]
servers = [\(dq127.0.0.1:2060\(dq, \(dq[::1]:2060\(dq]

[loader]
notify\-listeners = [\(dq127.0.0.1:2050\(dq, \(dq[::1]:2050\(dq]

[loader.review]
servers = [\(dq127.0.0.1:2051\(dq, \(dq[::1]:2051\(dq]

[signer]
[signer.review]
servers = [\(dq127.0.0.1:2052\(dq, \(dq[::1]:2052\(dq]

[key\-manager]

[server]
servers = [\(dq127.0.0.1:2053\(dq, \(dq[::1]:2053\(dq]
.EE
.UNINDENT
.UNINDENT
.SH GLOBAL OPTIONS
.INDENT 0.0
.TP
.B version = \(dqv1\(dq
The configuration file version. (REQUIRED)
.sp
This is the only required option.  All other settings, and their defaults,
are associated with this version number.  More versions may be added in the
future and Cascade may drop support for older versions over time.
.INDENT 7.0
.IP \(bu 2
\fBv1\fP: This format.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B policy\-dir = \(dq/etc/cascade/policies\(dq
The directory storing zone policies.
.sp
Zone policies are user\-managed files configuring groups of zones.  You can
modify them as you like, then ask Cascade to reload them with \(aqcascade
policy reload\(aq.
.UNINDENT
.INDENT 0.0
.TP
.B zone\-state\-dir = \(dq/var/lib/cascade/zone\-state\(dq
The directory storing per\-zone state files.
.sp
Cascade maintains an internal state file for every known zone here.  These
files should not be modified manually, but they can be backed up and
restored in the event of filesystem corruption.
.UNINDENT
.INDENT 0.0
.TP
.B tsig\-store\-path = \(dq/var/lib/cascade/tsig\-keys.db\(dq
The file storing TSIG key secrets.
.sp
This is an internal state file containing sensitive cryptographic material.
It should not be modified manually, but it can be backed up and restored in
the event of filesystem corruption.  Carefully consider its security.
.UNINDENT
.INDENT 0.0
.TP
.B kmip\-credentials\-store\-path = \(dq/var/lib/cascade/kmip/credentials.db\(dq
The file storing KMIP credentials.
.sp
This is an internal state file containing sensitive cryptographic material.
It should not be modified manually, but it can be backed up and restored in
the event of filesystem corruption.  Carefully consider its security.
.UNINDENT
.INDENT 0.0
.TP
.B keys\-dir = \(dq/var/lib/cascade/keys\(dq
The directory storing rollover states and on\-disk DNSSEC keys.
.sp
For every zone, the state of its DNSSEC keys (which keys are used, ongoing
rollovers, etc.) are stored here.  If on\-disk keys are used to sign zones,
they are stored also here.
.sp
The organization of this directory (file names and file formats) constitutes
internal implementation details.  It should not be modified manually, but it
can be backed up and restored in the event of filesystem corruption.
Carefully consider its security.
.UNINDENT
.INDENT 0.0
.TP
.B kmip\-server\-state\-dir = \(dq/var/lib/cascade/kmip\(dq
The directory containing KMIP server state.
.sp
Information about known KMIP servers is stored in this directory.
.sp
The organization of this directory (file names and file formats) constitutes
internal implementation details.  It should not be modified manually, but it
can be backed up and restored in the event of filesystem corruption.
.UNINDENT
.INDENT 0.0
.TP
.B dnst\-binary\-path = \(dq/usr/libexec/cascade/cascade\-dnst\(dq
The path to the dnst binary Cascade should use.
.sp
Cascade relies on the (not yet officially released) \fBdnst\fP program
(<\X'tty: link https://github.com/NLnetLabs/dnst'\fI\%https://github.com/NLnetLabs/dnst\fP\X'tty: link'>) in order to perform DNSSEC key
rollovers.  You can specify an absolute path here, or just \fBdnst\fP if it is
in $PATH.
.UNINDENT
.SH SETTINGS RELEVANT TO ANY DAEMON PROGRAM.
.sp
The \fB[daemon]\fP section.
.INDENT 0.0
.TP
.B log\-level = \(dqinfo\(dq
The minimum severity of the messages logged by the daemon.
.sp
Messages at or above the specified severity level will be logged.  The
following levels are defined:
.INDENT 7.0
.IP \(bu 2
\fBtrace\fP: A function or variable was interacted with, for debugging.
.IP \(bu 2
\fBdebug\fP: Something occurred that may be relevant to debugging.
.IP \(bu 2
\fBinfo\fP: Things are proceeding as expected.
.IP \(bu 2
\fBwarning\fP: Something does not appear to be correct.
.IP \(bu 2
\fBerror\fP: Something went wrong (but Cascade can recover).
.IP \(bu 2
\fBcritical\fP: Something went wrong and Cascade can\(aqt function at all.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B log\-target = { type = \(dqfile\(dq, path = \(dq/dev/stdout\(dq }
.UNINDENT
.INDENT 0.0
.TP
.B log\-target = { type = \(dqsyslog\(dq }
The location the daemon writes logs to.
.INDENT 7.0
.IP \(bu 2
type \fBfile\fP: Logs are appended line\-by\-line to the specified file path.
.sp
It can be set to \fB/dev/stdout\fP or \fB/dev/stderr\fP for standard output and
error, respectively.  If it is a terminal, ANSI escape codes may be used
to style the output.
.IP \(bu 2
type \fBsyslog\fP: Logs are written to the UNIX syslog.
.sp
This option is only supported on UNIX systems.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B daemonize = false
Whether to apply internal daemonization.
.sp
\(aqDaemonization\(aq involves several steps:
.INDENT 7.0
.IP \(bu 2
Forking the process to disconnect it from the terminal
.IP \(bu 2
Tracking the new process\(aq PID (by storing it in a file)
.IP \(bu 2
Binding privileged ports (below 1024) as configured
.IP \(bu 2
Dropping administrator privileges
.UNINDENT
.sp
These features may be provided by an external system service manager, such
as systemd.  If no such service manager is being used, Cascade can provide
such features itself, by setting this option to \fBtrue\fP\&.  This will also
enable the \fBpid\-file\fP and \fBidentity\fP settings (although they remain
optional).
.UNINDENT
.INDENT 0.0
.TP
.B pid\-file = \(dq/var/run/cascade.pid\(dq
The path to a PID file to maintain, if any.
.sp
If specified, Cascade will maintain a PID file at this location; it will be
a simple plain\-text file containing the PID number of the daemon process.
This option is only supported if \fBdaemonize\fP is true.
.UNINDENT
.INDENT 0.0
.TP
.B identity = \(dqcascade:cascade\(dq
An identity (user and group) to assume after startup.
.sp
Cascade will assume the specified identity after initialization.  Note that
this will fail if Cascade is started without administrator privileges.  This
option is only supported if \fBdaemonize\fP is \fBtrue\fP\&.
.sp
The identity can be specified as \fB<user>:<group>\fP or just \fB<user>\fP; in the
latter case, the identically named group will be used.  Numeric IDs are not
supported; only names can be used.
.sp
\fBNOTE:\fP
.INDENT 7.0
.INDENT 3.5
When using systemd, you should rely on its \(aqUser=\(aq and \(aqGroup=\(aq
options instead.  See <\X'tty: link https://www.freedesktop.org/software/systemd/man/latest/systemd.exec.html#User='\fI\%https://www.freedesktop.org/software/systemd/man/latest/systemd.exec.html#User=\fP\X'tty: link'>.
.UNINDENT
.UNINDENT
.UNINDENT
.SH HOW CASCADE IS CONTROLLED.
.sp
The \fB[remote\-control]\fP section.
.INDENT 0.0
.TP
.B servers = [\(dq127.0.0.1:2060\(dq, \(dq[::1]:2060\(dq]
Where to serve Cascade\(aqs HTTP API.
.sp
The HTTP API can be used to monitor and control Cascade.  The addresses
refer to TCP sockets that will be listened on for HTTP requests.  At the
moment, security mechanisms like TLS are not supported.
.sp
These sockets may be bound by systemd and passed into Cascade.  If systemd
does not provide them, Cascade will bind them itself (and will do so before
dropping privileges, if that is enabled).
.UNINDENT
.SH HOW ZONES ARE LOADED.
.sp
The \fB[loader]\fP section.
.INDENT 0.0
.TP
.B notify\-listeners = [\(dq127.0.0.1:2050\(dq, \(dq[::1]:2050\(dq]
Where to listen for zone change notifications.
.sp
A DNS server will be bound to these addresses.  If a DNS NOTIFY message for
a known zone is received there, the zone will be reloaded appropriately.
.sp
Unless explicitly specified (e.g. \fBudp://localhost:2050\fP), each address will
be served over UDP and TCP.  An empty array will disable listening entirely.
.sp
These sockets may be bound by systemd and passed into Cascade.  If systemd
does not provide them, Cascade will bind them itself (and will do so before
dropping privileges, if that is enabled).
.UNINDENT
.SH HOW LOADED ZONES ARE REVIEWED.
.sp
The \fB[loader.review]\fP section.
.INDENT 0.0
.TP
.B servers = [\(dq127.0.0.1:2051\(dq, \(dq[::1]:2051\(dq]
Where to serve loaded zones for review.
.sp
A DNS server will be bound to these addresses, and will serve the contents
of all loaded zones.  This can be used to verify the consistency of these
zones.
.sp
Unless explicitly specified (e.g. \fBudp://localhost:2051\fP), each address will
be served over UDP and TCP.  An empty array will disable serving entirely.
.sp
These sockets may be bound by systemd and passed into Cascade.  If systemd
does not provide them, Cascade will bind them itself (and will do so before
dropping privileges, if that is enabled).
.UNINDENT
.SH HOW ZONES ARE SIGNED.
.sp
The \fB[signer]\fP section. (This only includes the \fB[signer.review]\fP section
below, for now).
.SH HOW SIGNED ZONES ARE REVIEWED.
.sp
The \fB[signer.review]\fP section.
.INDENT 0.0
.TP
.B servers = [\(dq127.0.0.1:2052\(dq, \(dq[::1]:2052\(dq]
Where to serve signed zones for review.
.sp
A DNS server will be bound to these addresses, and will serve the contents
of all signed (but not necessarily published) zones.  This can be used to
check the correctness of the signer.
.sp
Unless explicitly specified (e.g. \fBudp://localhost:2052\fP), each address will
be served over UDP and TCP.  An empty array will disable serving entirely.
.sp
These sockets may be bound by systemd and passed into Cascade.  If systemd
does not provide them, Cascade will bind them itself (and will do so before
dropping privileges, if that is enabled).
.UNINDENT
.SH DNSSEC KEY MANAGEMENT.
.sp
The \fB[key\-manager]\fP section. (Currently without options)
.SH HOW ZONES ARE PUBLISHED.
.sp
The \fB[server]\fP section.
.INDENT 0.0
.TP
.B servers = [\(dq127.0.0.1:2053\(dq, \(dq[::1]:2053\(dq]
Where to serve published zones.
.sp
A DNS server will be bound to these addresses, and will serve the contents
of all published zones.  This is the final output from Cascade.
.sp
Unless explicitly specified (e.g. \fBudp://localhost:2053\fP), each address will
be served over UDP and TCP.  At least one address must be specified.
.sp
These sockets may be bound by systemd and passed into Cascade.  If systemd
does not provide them, Cascade will bind them itself (and will do so before
dropping privileges, if that is enabled).
.UNINDENT
.SH AUTHOR
NLnet Labs <cascade@nlnetlabs.nl>
.SH COPYRIGHT
2025–2025, NLnet Labs
.\" Generated by docutils manpage writer.
.
